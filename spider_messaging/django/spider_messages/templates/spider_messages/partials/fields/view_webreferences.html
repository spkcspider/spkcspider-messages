{% load spider_rdf i18n %}
<li typeof="spkc:Property">
  <data hidden="hidden" property="spkc:fieldname" datatype="xsd:string">{{field.html_name}}</data>
  <data hidden="hidden" property="spkc:name" datatype="xsd:string">{{field.name}}</data>
  {% hashable_literalize field as hashable %}
  <data hidden="hidden" property="spkc:hashable" datatype="xsd:boolean">{{hashable}}</data>
  <div>{{ field.label_tag }}</div>
  <ul class="w3-white">
    {% for val in field|field_to_python %}
      <data typeof="spkc:Entity">
        <span>{% trans 'Sender' %}: {{val.sender|default:val.sender}}</span>
        <data hidden="hidden" rel="spkc:properties">
          {% for d in val.items %}
            {% literalize d.1 as LiteralData %}
            <data hidden="hidden" typeof="spkc:Property">
              <data hidden="hidden" property="spkc:name" datatype="xsd:string">{{d.0}}</data>
              <data hidden="hidden" property="spkc:hashable" datatype="xsd:boolean">false</data>
              <data hidden="hidden" property="spkc:value" datatype="{{LiteralData.datatype}}">{{LiteralData.value}}</data>
            </data>
          {% endfor %}
        </data>
      </data>
    {% empty %}
      <li property="spkc:value" hidden="hidden" resource="rdf:nil"></li>
    {% endfor %}
  </ul>
</li>

<data>
  {% for message in widget.value %}
    <data hidden="hidden" typeof="spkc:Entity">
      <data hidden="hidden" rel="spkc:properties">
        {% for d in message.items %}
          {% literalize d.1 as LiteralData %}
          <data hidden="hidden" typeof="spkc:Property">
            <data hidden="hidden" property="spkc:name" datatype="xsd:string">{{d.0}}</data>
            <data hidden="hidden" property="spkc:hashable" datatype="xsd:boolean">false</data>
            <data hidden="hidden" property="spkc:value" datatype="{{LiteralData.datatype}}">{{LiteralData.value}}</data>
          </data>
        {% endfor %}
      </data>
    </data>
  {% endfor %}
</data>
